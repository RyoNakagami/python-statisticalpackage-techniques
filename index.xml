<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>pytest techniques for regmonkeys</title>
<link>https://ryonakagami.github.io/python-statisticalpackage-techniques/</link>
<atom:link href="https://ryonakagami.github.io/python-statisticalpackage-techniques/index.xml" rel="self" type="application/rss+xml"/>
<description></description>
<generator>quarto-1.5.57</generator>
<lastBuildDate>Mon, 11 Nov 2024 00:00:00 GMT</lastBuildDate>
<item>
  <title>はじめてのpytest</title>
  <dc:creator>Ryo Nakagami</dc:creator>
  <link>https://ryonakagami.github.io/python-statisticalpackage-techniques/posts/pytest101/chapter_header.html</link>
  <description><![CDATA[ 




<section id="assert文" class="level2">
<h2 class="anchored" data-anchor-id="assert文"><code>assert</code>文</h2>
<p><code>pytest</code>を用いたunit testの基本構文を理解するために以下のコードを見てみます．</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> test_passing():</span>
<span id="cb1-2">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">assert</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<p><code>assert</code>文はテストの成否を判断するPythonの組み込みコマンドです．<code>assert</code>以下が<code>False</code>と評価されると，<code>AssertionError</code>を発生させます．</p>
<p><code>test_passing</code>という関数の名前は<code>test_</code>から始まってますが，<code>pytest</code>は<code>test_</code>で始まる関数をテスト関数として検出しテストを実行します．</p>
<div id="exm-pytest101" class="custom_problem theorem example">
<p><span class="theorem-title"><strong>Example 1</strong></span> <strong>: test_script_001.py</strong> <br></p>
<div class="sourceCode" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> test_passing():</span>
<span id="cb2-2">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">assert</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span>
<span id="cb2-3"></span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> test_passing2():</span>
<span id="cb2-6">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">assert</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb2-7"></span>
<span id="cb2-8"></span>
<span id="cb2-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">def</span> nottest_passing():</span>
<span id="cb2-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-weight: bold;
font-style: inherit;">assert</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)</span></code></pre></div>
<p>というpytest用のファイルを用意します．これを実行すると</p>
<div id="0ec5c257" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%%</span>bash</span>
<span id="cb3-2">pytest <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>v .<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>pytest_scripts<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>test_script_001.py</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>============================= test session starts ==============================
platform linux -- Python 3.11.10, pytest-8.3.3, pluggy-1.5.0 -- /opt/hostedtoolcache/Python/3.11.10/x64/bin/python
cachedir: .pytest_cache
rootdir: /home/runner/work/python-statisticalpackage-techniques/python-statisticalpackage-techniques
configfile: pyproject.toml
plugins: anyio-4.6.2.post1
collecting ... collected 2 items

pytest_scripts/test_script_001.py::test_passing PASSED                   [ 50%]
pytest_scripts/test_script_001.py::test_passing2 PASSED                  [100%]

============================== 2 passed in 0.01s ===============================</code></pre>
</div>
</div>
<p>上記の例では，</p>
<ul>
<li><code>collecting ... collected 2 items</code>よりテスト関数が2つ検出された</li>
<li><code>test_passing</code>, <code>test_passing2</code> が問題なくテストパスした</li>
</ul>
<p>という情報が表示されています．</p>
<div class="sourceCode" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><span class="ex" style="color: null;
background-color: null;
font-style: inherit;">pytest</span> <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">-v</span> ./pytest_scripts/test_script_002.py</span></code></pre></div>
</div>


</section>

 ]]></description>
  <guid>https://ryonakagami.github.io/python-statisticalpackage-techniques/posts/pytest101/chapter_header.html</guid>
  <pubDate>Mon, 11 Nov 2024 00:00:00 GMT</pubDate>
</item>
</channel>
</rss>
